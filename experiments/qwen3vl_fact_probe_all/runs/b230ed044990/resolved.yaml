schema_version: 1
name: qwen3vl_fact_probe_all
kind: generic
description: Knowledge-only probe for TruthAndDeception facts (tests potential memorization
  / world-knowledge leakage).
tags:
- eval
- probe
- truth_and_deception
repro:
  seed: 0
  python: '>=3.10,<3.13'
spec:
  facts_path: mindgames/envs/TruthAndDeception/facts.json
  agent: qwen:Qwen/Qwen3-VL-4B-Thinking
  model: null
  openai_base_url: http://127.0.0.1:8010/v1
  openai_api_key: dummy
  timeout_s: null
  num_items: 200
  prompt_style: tag
  system_prompt: You are doing a strict multiple-choice knowledge check. Output ONLY
    the final choice in the required format.
  resume: false
  output_minimal: true
  gen:
    temperature: 0.6
    top_p: 0.95
    top_k: 20
    repetition_penalty: 1.0
    presence_penalty: 0.0
    gen_seed: 1234
    max_tokens: 4096
    max_new_tokens: 128
    extra_body: null
    chat_template_kwargs: null
    disable_thinking: false
commands:
- python tools/probe_fact_leakage.py --facts {spec.facts_path} --agent {spec.agent}
  {opt:--model spec.model} {opt:--openai-base-url spec.openai_base_url} {opt:--openai-api-key
  spec.openai_api_key} {opt:--timeout spec.timeout_s} --seed {repro.seed} --num-items
  {spec.num_items} --prompt-style {spec.prompt_style} --system-prompt {sh:spec.system_prompt}
  --temperature {spec.gen.temperature} --top-p {spec.gen.top_p} {opt:--top-k spec.gen.top_k}
  {opt:--repetition-penalty spec.gen.repetition_penalty} {opt:--presence-penalty spec.gen.presence_penalty}
  {opt:--gen-seed spec.gen.gen_seed} {optsh:--extra-body spec.gen.extra_body} {optsh:--chat-template-kwargs
  spec.gen.chat_template_kwargs} {flag:--disable-thinking spec.gen.disable_thinking}
  --max-tokens {spec.gen.max_tokens} --max-new-tokens {spec.gen.max_new_tokens} {flag:--output-minimal
  spec.output_minimal} {flag:--resume spec.resume} --out-jsonl {run_dir}/probe.jsonl
  --out-summary {run_dir}/summary.json
outputs:
  files:
  - '{run_dir}/probe.jsonl'
  - '{run_dir}/summary.json'
wandb:
  project: mindgames
  job_type: probe
_resolved_commands:
- python tools/probe_fact_leakage.py --facts mindgames/envs/TruthAndDeception/facts.json
  --agent qwen:Qwen/Qwen3-VL-4B-Thinking  --openai-base-url http://127.0.0.1:8010/v1
  --openai-api-key dummy  --seed 0 --num-items 200 --prompt-style tag --system-prompt
  'You are doing a strict multiple-choice knowledge check. Output ONLY the final choice
  in the required format.' --temperature 0.6 --top-p 0.95 --top-k 20 --repetition-penalty
  1.0 --presence-penalty 0.0 --gen-seed 1234    --max-tokens 4096 --max-new-tokens
  128 --output-minimal  --out-jsonl experiments/qwen3vl_fact_probe_all/runs/b230ed044990/probe.jsonl
  --out-summary experiments/qwen3vl_fact_probe_all/runs/b230ed044990/summary.json
run_id: b230ed044990
run_dir: experiments/qwen3vl_fact_probe_all/runs/b230ed044990
